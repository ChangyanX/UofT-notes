# 2021-01-18 Crafting an Exploit

* how do we get the shellcode to run?
  * unchecked strcpy (stack smash)?
  * attacker does not know the exact address of the stack

* NOP sled  
  * technique to not require us to know exact address of buffer or return address
  * pad the shellcode out with NOP (`0x90`), start it partway into the stack buffer (ex. at 0x1234)
  * find address close to where we think buf will be on the stack
  * we just spam the stack with the address, and hopefully it'll work and overwrite the RA to 0x1234
  * 0x1234 runs a bunch of NOPs and eventually gets to the shellcode
* Other attack buffers
  * Problem: buffer not large enough to hold shellcode (shellcode would overwrite RA)
    * put shellcode somewhere else
      * after buffer
      * after RA
  * Problem: program forms the buffer from several strings
    * common to have buffer overflow when a program is building a list of things to return to the user via strcat
    * attacker may provide shellcode in pieces